<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Directory Service Plugin 0.5.0</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#history"><strong>2</strong><span>History</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#installation"><strong>3</strong><span>Installation</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#configuration"><strong>4</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#usage"><strong>5</strong><span>Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#roadmap"><strong>6</strong><span>Roadmap</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#resources"><strong>7</strong><span>Resources</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>Grails Plugin which makes interacting with directory (LDAP) servers a breeze.
</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Directory Service Plugin - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Lucas Rockwell</p>
                            <p><strong>Version:</strong> 0.5.0</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#history"><strong>2</strong><span>History</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#installation"><strong>3</strong><span>Installation</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#configuration"><strong>4</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#usage"><strong>5</strong><span>Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#roadmap"><strong>6</strong><span>Roadmap</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#resources"><strong>7</strong><span>Resources</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="introduction">1 Introduction</h1>
<h2>Overview</h2><p class="paragraph"/>DirectoryService is a <a href="http://grails.org/" target="blank">Grails</a> <a href="http://grails.org/plugins/" target="blank">plugin</a> that allows you to interact with a v3-compliant LDAP server with minimal effort. It is built on top of the <a href="http://www.unboundid.com/" target="blank">UnboundID</a> <a href="http://www.unboundid.com/products/ldap-sdk/" target="blank">LDAP SDK</a>.<p class="paragraph"/>DirectoryService is inspired by <a href="http://grails.org/doc/latest/guide/GORM.html" target="blank">GORM</a>, but since this is LDAP, we really can only go as far as inspired, because there is no "R" (relational) in LDAP. Unlike a database, LDAP does not really have a structure (well, there is the DIT, but that is about it), so it does not seem reasonable or necessary to make concrete classes to represent LDAP objects. As you read more about this plugin, and start to use it, you will realize why concrete classes are unnecessary.<p class="paragraph"/>Furthermore, you can use <a href="http://grails.org/doc/latest/guide/theWebLayer.html#commandObjects" target="blank">Command Objects</a> for your logic for your directory objects, i.e., you don't need to put them into a class that is specific to a tree in LDAP. (At least that is how I feel about this now, and Command Objects are just as powerful as Domain Objects.)<p class="paragraph"/>As mentioned above, DirectoryService is built on top of the UnboundID LDAP SDK, and therefore, that SDK is exposed through this plugin. However, it is best if you try to use the methods provided by the plugin as much as possible, as the SDK API may change. That is, we try to encapsulate the basic functionality that you need, but if you really need something you can go under the covers. Also, feel free to open an <a href="https://github.com/lr/directory-service/issues" target="blank">Enhancement Issue on GitHub</a>.<p class="paragraph"/><blockquote class="note">
This plugin assumes you have working knowledge of LDAP. If you need to get familiar with LDAP, please see the <a href="../guide/single.html#resources" class="guide">Resources</a> section.
</blockquote>



<h1 id="history">2 History</h1>
<ul class="star">
<li>Pre-release 0.1.0</li>
<ul class="star">
<li>July 2012</li>
</ul>
<li>Beta-release 0.5.0</li>
<ul class="star">
<li>August 2012</li>
</ul></ul><p class="paragraph"/>


<h1 id="installation">3 Installation</h1>
<h2>Overview</h2><p class="paragraph"/>This section describes how to install the <code>DirectoryService</code> plugin.<p class="paragraph"/><h2>Install Plugin</h2><p class="paragraph"/>The <code>DirectoryService</code> plugin is installed like any other plugin. It can be added to <code>BuildConfig.groovy</code> like so:<p class="paragraph"/><div class="code"><pre>plugins &#123;
    compile ':directory&#45;service:0.5.0'
&#125;</pre></div><p class="paragraph"/>Or you can install it from the command line from the root directory of your project:<p class="paragraph"/><div class="code"><pre>grails install&#45;plugin directory&#45;service</pre></div>


<h1 id="configuration">4 Configuration</h1>
<h2>Overview</h2><p class="paragraph"/>This section describes how to configure the <code>DirectoryService</code> plugin.<p class="paragraph"/><h2>Define The DIT</h2><p class="paragraph"/>Instead of crawling your LDAP directory, <code>DirectoryService</code> expects you to give it some hints about how your server is set up. Once you configure the plugin, it will become obvious to you how it works.<p class="paragraph"/>Since the DIT definition is a Map, you must put it in a <code>.groovy</code> file. The easiest place to put it is in <code>Config.groovy</code>, but you can put it into any config file you have defined.<p class="paragraph"/>For this example, we are going to assume that our LDAP tree has three branches that we are interested in mapping:<p class="paragraph"/><div class="code"><pre>ou=people,dc=someu,dc=edu
ou=departments,dc=someu,dc=edu
ou=groups,dc=someu,dc=edu</pre></div><p class="paragraph"/>So, we need to tell <code>DirectoryService</code> about these branches, including the singular and plural names of the objects in those branches, the RDN attribute for the objects in those branches, and the source, i.e., what server contains this information.<p class="paragraph"/>The above branches would be defined in the <code>directoryService.dit</code> as follows:<p class="paragraph"/><div class="code"><pre>grails.plugins.directoryservice.dit = &#91;
    'ou=people,dc=someu,dc=edu':&#91;
        'singular':'person',
        'plural':'people',
        'rdnAttribute':'uid',
        'source':'directory'
    &#93;,
    'ou=departments,dc=someu,dc=edu':&#91;
        'singular':'department',
        'plural':'departments',
        'rdnAttribute':'ou',
        'source':'directory'
    &#93;,
    'ou=groups,dc=someu,dc=edu':&#91;
        'singluar':'group',
        'plural':'groups',
        'rdnAttribute':'uid',
        'source':'directory'
    &#93;
&#93;</pre></div><p class="paragraph"/>See the table below for definitions of the various elements of the map:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Attribute</strong></th><th><strong class="bold">Meaning</strong></th><th><strong class="bold">Notes/Example</strong></th></tr><tr class="table-odd"><td>singular</td><td>The singular spelling for the name of the tree.</td><td>This does <strong class="bold">not</strong> have to match the name in the DN.</td></tr><tr class="table-even"><td>plural</td><td>The plural spelling for the name of the tree.</td><td>This does <strong class="bold">not</strong> have to even be the plural version of singular, but you probably what to keep these things consistent for your own sanity.</td></tr><tr class="table-odd"><td>rdnAttribute</td><td>This is the attribute which makes up the RDN of the entry.</td><td>If the DN of a person is <code>uid=125236,ou=people,dc=someu,dc=edu</code>, then the rdnAttribute would be "uid". If the DN of a person is <code>cn=Rockwell&#44; Lucas,ou=people,dc=someu,dc=edu</code>, then the rdnAttribute would be "cn". This <strong class="bold">must</strong> be the real RDN attribute, i.e., you can't make this up.</td></tr><tr class="table-even"><td>source</td><td>This is the source</td><td>This points to an entry in <code>grails.plugins.directoryservice.sources</code>.</td></tr></table><p class="paragraph"/><h3>One Branch, Multiple Objects</h3><p class="paragraph"/>Store more than one object type in the same branch? No problem! Map keys are case sensitive, so you can define multiple objects in the same branch by changing the case of at least one character in the dn. For example, let's say you have both people and accounts in the "people" branch (don't know why you would, but let's just say you do), and the rdnAttribute of people is "uid", and the rdnAttribute of accounts is "cn":<p class="paragraph"/><div class="code"><pre>grails.plugins.directoryservice.dit = &#91;
    'ou=people,dc=someu,dc=edu':&#91;
        singular: 'person',
        plural: 'people',
        rdnAttribute: 'uid',
        source: 'directory'
    &#93;,
    'ou=People,dc=someu,dc=edu':&#91;
        singular: 'account',
        plural: 'accounts',
        rdnAttribute: 'cn',
        source: 'directory'
    &#93;
&#93;</pre></div><p class="paragraph"/>See the examples in the <a href="../guide/single.html#usage" class="guide">Usage</a> section for details on how these various elements are utilized.<p class="paragraph"/><h2>Define Sources</h2><p class="paragraph"/>In the <code>dit</code> definition above, there is an attribute named "source". This points to a directory server configured in <code>grails.plugins.directoryservice.sources</code>. For instance:<p class="paragraph"/><div class="code"><pre>grails.plugins.directoryservice.sources = &#91;
    'directory':&#91;
        address: 'server1,server2',
        port: '636,636',
        useSSL: <span class="java&#45;keyword">true</span>,
        trustSSLCert: <span class="java&#45;keyword">true</span>,
        followReferrals: <span class="java&#45;keyword">true</span>,
        bindDN: 'cn=Directory Manager',
        bindPassword: 'password'
    &#93;
&#93;</pre></div><p class="paragraph"/>See the table below for information on what each attribute means:<p class="paragraph"/>
<h2>More Examples</h2><p class="paragraph"/>For more examples of how to configure the dit and sources, see the <code>Config.groovy</code> file in the main project: <a href="https://github.com/lr/directory-service/blob/master/grails-app/conf/Config.groovy" target="blank"></a>.


<h1 id="usage">5 Usage</h1>
<h2>Overview</h2><p class="paragraph"/>As noted in the <a href="../guide/single.html#introduction" class="guide">Introduction</a>, <code>DirectoryService</code> is inspired by GORM. Therefore, the methods should be intuitive. This section gives you a brief overview, but please see the Reference Guide for details of each method.<p class="paragraph"/><h2>How it Works</h2><p class="paragraph"/>For more in-depth details of how <code>DirectoryService</code> works, please see the other sections of this guide, including the ref:DirectoryService pages.<p class="paragraph"/><h3>Add DirectoryService to your class</h3><p class="paragraph"/>Once you have <code>DirectoryService</code> <a href="../guide/single.html#configuration" class="guide">configured</a>, you can add it to a class the way you would any other service:<p class="paragraph"/><div class="code"><pre>def directoryService</pre></div><p class="paragraph"/><h3>Search for an object</h3><p class="paragraph"/>Now you can search for something in your directory (again, see the <a href="../guide/single.html#configuration" class="guide">Configuration</a> section) like this:<p class="paragraph"/><div class="code"><pre>def people = directoryService.findPeopleWhere('departmentNumber':'12345', 'manager':'3786258')</pre></div><p class="paragraph"/>The above will return a list of <code>DirectoryServiceEntry</code> objects. A <code>DirectoryServiceEntry</code> object is a wrapper around an UnboundID <code>Entry</code> object, so everything you can do with an <code>Entry</code> object is available to you.<p class="paragraph"/><h3>Use the results</h3><p class="paragraph"/>Once you perform a search, you can then use the object the way you would use a GORM object:<p class="paragraph"/><div class="code"><pre>people.each &#123; person &#45;&#62;
    println <span class="java&#45;quote">"$&#123;person.displayName&#125;, $&#123;person.telephoneNumber&#125;"</span>
&#125;</pre></div><p class="paragraph"/>Now you might say, but this is LDAP, so what happens if the person does not have a <code>telephoneNumber</code> defined in their entry? Nothing! The attribute doesn't exist, it doesn't print anything. This is possible because <code>DirectoryService</code> is based on the UnboundID LDAP SDK, and that SDK allows you to ask for attribute values on attributes that do not exist in the entry, with no ill effects, i.e., no exceptions are thrown. However, the call does return <code>null</code> if there is no attribute with the provided name, so it is best to use the "?" operator if you plan to do something with the value, if that something you plan to do does not like <code>null</code> objects.<p class="paragraph"/>To see how the UnboundID LDAP SDK is being used here, the above <code>person.displayName</code> could also be accomplished with the following:<p class="paragraph"/><div class="code"><pre>person.getEntry().getAttributeValue(<span class="java&#45;quote">"displayName"</span>)</pre></div><p class="paragraph"/>As you can see, we are calling <code>getAttributeValue</code>, so if you want the attribute value<strong class="bold">s</strong>, then you would have to use the special <code>Values()</code> method:<p class="paragraph"/><div class="code"><pre>person.cnValues()</pre></div><p class="paragraph"/>This returns a String array.<p class="paragraph"/><h2>Operations Implemented</h2><p class="paragraph"/>As of the current release, <code>find</code> (<code>search</code>), and <code>save</code> (<code>modify</code>) are implemented. <code>add</code> and <code>delete</code> will be added in upcoming releases. See the <a href="../guide/single.html#roadmap" class="guide">roadmap</a> for details.<p class="paragraph"/><p class="paragraph"/>


<h1 id="roadmap">6 Roadmap</h1>
<h2>Overview</h2><p class="paragraph"/>This page outlines what to expect in future releases of the <code>DirectoryService</code> plugin. If you have a feature request/enhancement, please create an "Issue" on GitHub and label it an enhancement: <a href="https://github.com/lr/directory-service/issues" target="blank"></a>.<p class="paragraph"/><h2>Summer 2012</h2><p class="paragraph"/>This summer I hope I can include the ability to <code>add</code>, along with JSON and XML output for the <code>DirectoryServiceEntry</code> object.<p class="paragraph"/><h2>Fall 2012</h2><p class="paragraph"/>By Fall I hope to implement <code>find&#42;By&#42;</code> methods, for instance, <code>findPeopleBySnAndGivenName</code>, and <code>findPeopleBySnLike</code>, etc.<p class="paragraph"/>


<h1 id="resources">7 Resources</h1>
<h2>Overview</h2><p class="paragraph"/>The DirectoryService Plugin is for interacting with an LDAP directory. If you are not familiar with LDAP, please read the <a href="http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol" target="blank">Wikipedia LDAP page</a> for starters.<p class="paragraph"/><h3>API Docs</h3>
<ul class="star">
<li><a href="https://lr.github.com/directory-service/gapi/" target="blank">Groovy API</a></li>
</ul><p class="paragraph"/><h3>UnboundID LDAP SDK Docs</h3><p class="paragraph"/>The DirectoryService plugin is based on the UnboundID LDAP SDK.
<ul class="star">
<li><a href="https://www.unboundid.com/products/ldap-sdk/" target="blank">Overview</a></li>
<li><a href="https://www.unboundid.com/products/ldap-sdk/docs/javadoc/index.html" target="blank">API Java Docs</a></li>
</ul><p class="paragraph"/><blockquote class="note">
The UnboundID LDAP SDK is very powerful, and of course DirectoryService only uses a fraction of what it has to offer. However, we have tried to encapsulate in DirectoryService what the kinds of activities you would do with a directory most of the time, so if at all possible, try to avoid using the underlying UnboundID API because if it changes, then you will have to change your code, as well, and it will be up to you to keep up with any changes.
</blockquote><p class="paragraph"/><h3>DirectoryService API Docs</h3><p class="paragraph"/>

                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">DirectoryService</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/DirectoryService/find.html">find</a>
                        </div>
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">DirectoryServiceEntry</h1><div class="menu-sub">
                        
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">InMemoryDirectoryServer</h1><div class="menu-sub">
                        
                        
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
